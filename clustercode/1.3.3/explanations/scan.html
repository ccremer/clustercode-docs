<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Untitled :: Clustercode Docs</title>
    <link rel="canonical" href="https://ccremer.github.io/clustercode-docs/clustercode/1.3.3/explanations/scan.html">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header" role="banner">
  <nav class="navbar">
    <div class="navbar-brand">
      <div class="navbar-item">
        <a href="https://ccremer.github.io/clustercode-docs">Clustercode Docs</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="clustercode" data-version="1.3.3">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Clustercode</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Introduction</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">How To</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../how-tos/install-docker.html">Install On Docker</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../how-tos/install-windows.html">Install On Windows</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../how-tos/install-netdata.html">Install Netdata</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../how-tos/upgrade.html">Upgrade</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Technical reference</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../references/storage.html">Storage Settings</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../references/scan.html">Scan Settings</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../references/encoder.html">Encoder Settings</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../references/cluster.html">Cluster Settings</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../references/cleanup.html">Cleanup Settings</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../references/constraints.html">Constraints</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../references/api.html">API Settings</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Explanation</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="storage.html">Storage</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="scan.html">Scan</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="encoder.html">Encoder</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="cluster.html">Cluster</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="cleanup.html">Cleanup</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="constraints.html">Constraints</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="api.html">API</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Clustercode</span>
    <span class="version">1.3.3</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../../index.html">Clustercode</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../index.html">master</a>
        </li>
        <li class="version">
          <a href="../../v2.0.0-rc3/index.html">v2.0.0-rc3</a>
        </li>
        <li class="version is-current">
          <a href="../index.html">1.3.3</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Clustercode</a></li>
    <li>Explanation</li>
    <li><a href="scan.html">Scan</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">1.3.3</button>
  <div class="version-menu">
    <a class="version is-missing" href="../../index.html">master</a>
    <a class="version is-missing" href="../../v2.0.0-rc3/index.html">v2.0.0-rc3</a>
    <a class="version is-current" href="scan.html">1.3.3</a>
  </div>
</div>
  <div class="edit-this-page"><a href="https://github.com/ccremer/clustercode/blob/1.3.3/docs/modules/ROOT/pages/explanations/scan.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<div class="sect1">
<h2 id="_media_extensions"><a class="anchor" href="#_media_extensions"></a>Media Extensions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When scanning, clustercode will look for files that end with these extensions.
Only the file name matters, not what is in the files.
If the files are not video files, <code>ffmpeg</code> will likely fail.
Do not provide a leading dot <code>.</code> before the extensions in the setting.
Only the last part after the last dot in the file will count as extension.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_skip_media"><a class="anchor" href="#_skip_media"></a>Skip Media</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When a clustercode node has converted a video, all other nodes (including itself) need to know which media have already been processed.
One way to ensure that the same media will not get picked again is to create an empty file that matches exactly the original file name and add a special extension.
If clustercode detects a video file, but there is another file with the same name but with this skip extension, it won&#8217;t get in the list of possible processing candidates.
This is why clustercode needs write permissions on the input directories.
No other files will be touched, deleted or otherwise modified.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_profiles"><a class="anchor" href="#_profiles"></a>Profiles</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>ffmpeg</code> needs some parameters to know how to convert the input files.
These parameters are stored in profiles.
If you want to create custom ones, copy from the included profiles and start modifying from them.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_media_scan_interval"><a class="anchor" href="#_media_scan_interval"></a>Media Scan Interval</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This is the interval in minutes if no suitable media could be found before and after encoding.
If a new video has been added in the meantime, it will be picked up at the next scan.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_profile_match_strategies"><a class="anchor" href="#_profile_match_strategies"></a>Profile match strategies</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The setting accepts certain space-separated strings of pre-defined entries.
The order in which they are specified <strong>does</strong> matter.
The search for profiles will stop as soon as one is found in the matcher.
So if you specify <code>COMPANION DEFAULT DIRECTORY_STRUCTURE</code> The profile scanner will never look in the subdirectories of <code>/profiles</code> if the default profile exists.</p>
</div>
<div class="sect2">
<h3 id="_companion"><a class="anchor" href="#_companion"></a>Companion</h3>
<div class="paragraph">
<p>This strategy searches for a file named exactly as the media file, but with an additional extension.
Using this strategy you can override any profile in the <code>CC_PROFILE_DIR</code> directory.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Media file: <code>/input/0/movies/ratavA.mkv</code></p>
</li>
<li>
<p>Profile file: <code>/input/0/movies/ratavA.mkv.ffmpeg</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>will match before there is a <code>/profiles/0/profile.ffmpeg</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_directory_structure"><a class="anchor" href="#_directory_structure"></a>Directory Structure</h3>
<div class="paragraph">
<p>Provides a matcher that will look recursively in the directory structure until it finds the first matching profile.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Media file: <code>/input/0/movies/action/ratavA.mkv</code></p>
</li>
<li>
<p>Profile file: <code>/profiles/0/movies/profile.ffmpeg</code></p>
</li>
<li>
<p>Try #1: <code>/profiles/0/movies/action/profile.ffmpeg</code> &#8594; not found</p>
</li>
<li>
<p>Try #2: <code>/profiles/0/movies/profile.ffmpeg</code> &#8594; found</p>
</li>
<li>
<p><code>/profiles/0/profile.ffmpeg</code> will not be checked</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_default"><a class="anchor" href="#_default"></a>Default</h3>
<div class="paragraph">
<p>Provides a matcher that will look for a file named <code>CC_PROFILE_DIR/CC_PROFILE_FILE_DEFAULT.CC_PROFILE_FILE_EXTENSION</code>.
It should be a last-resort matcher that catches all unmatched media files.</p>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<!--
This page was built using the Antora default UI.
The source code for this UI is licensed under the terms of the MPL-2.0 license.
->
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
