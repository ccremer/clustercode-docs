<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Clustercode :: Clustercode Docs</title>
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../_/css/site.css">
    <script>var uiRootPath = '../../_'</script>
  </head>
  <body class="article">
<header class="header" role="banner">
  <nav class="navbar">
    <div class="navbar-brand">
      <div class="navbar-item">
        <a href="../..">Clustercode Docs</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="clustercode" data-version="1.3.3">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html">Clustercode</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="index.html">Introduction</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">How To</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="how-tos/install-docker.html">Install On Docker</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="how-tos/install-windows.html">Install On Windows</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="how-tos/install-netdata.html">Install Netdata</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="how-tos/upgrade.html">Upgrade</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Technical reference</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="references/storage.html">Storage Settings</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="references/scan.html">Scan Settings</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="references/encoder.html">Encoder Settings</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="references/cluster.html">Cluster Settings</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="references/cleanup.html">Cleanup Settings</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="references/constraints.html">Constraints</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="references/api.html">API Settings</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Explanation</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="explanations/storage.html">Storage</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="explanations/scan.html">Scan</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="explanations/encoder.html">Encoder</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="explanations/cluster.html">Cluster</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="explanations/cleanup.html">Cleanup</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="explanations/constraints.html">Constraints</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="explanations/api.html">API</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Clustercode</span>
    <span class="version">1.3.3</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../v2.0.0-rc3/index.html">Clustercode</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../v2.0.0-rc3/index.html">v2.0.0-rc3</a>
        </li>
        <li class="version is-current">
          <a href="index.html">1.3.3</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../v2.0.0-rc3/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Clustercode</a></li>
    <li><a href="index.html">Introduction</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">1.3.3</button>
  <div class="version-menu">
    <a class="version" href="../v2.0.0-rc3/index.html">v2.0.0-rc3</a>
    <a class="version is-current" href="index.html">1.3.3</a>
  </div>
</div>
  <div class="edit-this-page"><a href="https://github.com/ccremer/clustercode/blob/1.3.3/docs/modules/ROOT/pages/index.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Clustercode</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Automatically convert your movies and TV shows from one file format to another using ffmpeg in a cluster.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_overview"><a class="anchor" href="#_overview"></a>Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Let&#8217;s look at the graphic below. It shows two nodes and how they are working together on automatically pickup new tasks and make sure that they are the only ones processing it.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/process.png" alt="process">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_procedure_in_detail"><a class="anchor" href="#_the_procedure_in_detail"></a>The procedure in detail</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Start up the node and connect to a cluster. If the node is the first in the cluster, it will become master. Though that doesn&#8217;t affect media selection or encoding.</p>
</li>
<li>
<p>Scan the input storage. In this directory are the media sources located in a special pattern. More on that later.</p>
</li>
<li>
<p>One of:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Select a media file. If the media is already processed, it won&#8217;t be picked again.</p>
</li>
<li>
<p>Wait a few minutes in case no media has been found and go back to step 2.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Check if any constraints would prevent this media selection.</p>
</li>
<li>
<p>Select a profile that matches the media. A profile contains the information on how to encode the media file. Basically they are ffmpeg options.</p>
</li>
<li>
<p>Ask the cluster if the selected media is already being converted. It it is, go back to step 3a)</p>
</li>
<li>
<p>Encode the selected media using ffmpeg in a temporary folder.</p>
</li>
<li>
<p>Perform a cleanup according to the selected cleanup strategy. Move the file to the output storage.</p>
</li>
<li>
<p>Go back to step 2.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The state machine of a node should help understanding it.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/statemachine.png" alt="statemachine">
</div>
</div>
<h2 id="_documentation" class="discrete">Documentation</h2>
<div class="paragraph">
<p>The documentation is inspired by the <a href="https://documentation.divio.com/">Divio&#8217;s documentation structure</a>:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Tutorials</dt>
<dd>
<p><em>Learning-oriented</em>: Simple lessons to learn about Clustercode.</p>
</dd>
<dt class="hdlist1">How-to guides</dt>
<dd>
<p><em>Problem-oriented</em>: step-by-step guides to achieve a goal.</p>
</dd>
<dt class="hdlist1">Technical reference</dt>
<dd>
<p><em>Information-oriented</em>: explaining the inner ongoings of Clustercode.</p>
</dd>
<dt class="hdlist1">Explanation</dt>
<dd>
<p><em>Understanding-oriented</em>: puts Clustercode in context.</p>
</dd>
</dl>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
